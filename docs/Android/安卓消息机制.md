# Android 消息机制

> :email::email::email:Android通过Looper、MessageQueue、Handler来实现消息循环机制。Android的消息机制主要是指Handler的运行机制。Handler的运行需要底层MessageQueue和Looper的支撑。
>
> Android消息循环是针对线程的，Handler用于同一个进程的线程间通信。创建的工作线程默认是没有消息队列和消息循环的。
>
> 消息处理机制本质：**一个线程开启循环模式持续监听并依次处理其他线程给它发的消息**。



## Message

线程之间通信的消息体，线程之间共享，

## MessageQueue

存储消息

## Looper

轮询消息队列，通过loop()调用MQ.next()方法取出Message交给Handler处理

## Handler

发送和处理Message

![image-20231020165014727](../img/image-20231020165014727.png)

### Handler多线程通信机制

![image-20231020165321176](../img/image-20231020165321176.png)



